import{j as l,a as e,L as v,c as M,b,p as L,u as x,F as C,r as g,M as O,S as T,d as B,e as E,R as V,f as y,g as j,h as H,H as U}from"./vendor.cbe2ed8d.js";const q=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const d of n.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function i(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerpolicy&&(n.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?n.credentials="include":t.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(t){if(t.ep)return;t.ep=!0;const n=i(t);fetch(t.href,n)}};q();const K=()=>l("nav",{children:[e("div",{className:"nav-brand",children:e("h3",{children:e(v,{to:"/",children:"Movie Lib"})})}),l("div",{className:"nav-links",children:[e(v,{to:"search",children:"Search"}),e(v,{to:"my-list",children:"My List"})]}),l("div",{className:"nav-icons",children:[e(v,{to:"search",children:e("i",{className:"fa fa-search","aria-hidden":"true",title:"Search"})}),e(v,{to:"my-list",children:e("i",{className:"fa fa-plus","aria-hidden":"true",title:"My List"})})]})]}),N={trending:{path:"trending/movie/day",title:"Trending Today"},popular:{path:"movie/popular",title:"Popular Movies"},tvShows:{path:"tv/top_rated",title:"Top Rated TV Shows"}},k="https://api.themoviedb.org/3",$="cfd5046336aae11cf3128bac12f9c60c",w=M((r,a)=>({trending:[],popular:[],tvShows:[],fetchShows:(i,s)=>{let t=`${k}/${N[s].path}?api_key=${$}&language=en-US&page=1`;a()[s].length===0&&b.get(t,i).then(d=>{let m=d.data.results,p=s==="tvShows"?"tv":"movie";b.all(m.map(c=>b.get(`${k}/${p}/${c.id}?api_key=${$}&language=en-US&append_to_response=videos`,i).catch(o=>console.log(o)))).then(b.spread(function(...c){c.map((o,f)=>m[f].detailed=c[f].data),r({[s]:m})})).catch(c=>console.log(c))}).catch(d=>console.log(d))}})),R=M(r=>({saved:[],addToList:a=>{r(L(i=>{i.saved.findIndex(t=>t.id===a.id)===-1&&i.saved.unshift(a)}))},removeFromList:a=>{r(L(i=>{const s=i.saved.findIndex(t=>t.id===a);i.saved.splice(s,1)}))}}));const W=()=>{const r=w(s=>s.trending),a=r.length>0&&r[Math.floor(Math.random()*(r.length-1))],i=x();return e("div",{className:"banner",children:r.length>0&&l(C,{children:[e("div",{className:"banner-img",children:e("img",{src:`https://image.tmdb.org/t/p/w1280${a.backdrop_path||a.poster_path}`,alt:a.original_name||a.original_title})}),e("div",{className:"shadow"}),l("div",{className:"banner-info",children:[e("h1",{className:"title",children:a.original_name||a.original_title}),e("span",{className:"synopsis",children:a.overview.length>250?a.overview.substring(0,250)+"...":a.overview}),e("div",{className:"btn-grp",children:e("button",{className:"btn btn-round-primary",onClick:()=>i(`watch/${a.original_name||a.original_title}/${a.detailed.videos.results[0].key}`),children:l("span",{children:[e("i",{className:"fa fa-play","aria-hidden":"true"})," Play"]})})})]})]})})};const D={content:{maxWidth:"90vw",inset:"50% auto auto 50%",marginRight:"-50%",transform:"translate(-50%, -50%)"}},P=r=>{const{id:a,img_url:i,vid_url:s,title:t,overview:n,genres:d}=r,[m,p]=g.exports.useState(!1),c=x(),{saved:o,addToList:f,removeFromList:I}=R(u=>u);function A(){p(!0)}function S(){p(!1)}const[h,F]=g.exports.useState(!(o.findIndex(u=>u.id===a)<0)),_=()=>{F(!h),h?I(a):f({id:a,img_url:i,vid_url:s,title:t,overview:n,genres:d})};return l("div",{className:"poster",children:[e("img",{src:`https://image.tmdb.org/t/p/w500${i}`,alt:t}),l(O,{isOpen:m,onRequestClose:S,style:D,contentLabel:"Example Modal",ariaHideApp:!1,children:[l("div",{className:"modal-header",children:[e("h2",{children:t}),e("button",{className:"btn-close",onClick:S,children:e("i",{className:"fa fa-close","aria-hidden":"true"})})]}),l("div",{className:"modal-body",children:[s?e("iframe",{src:`https://www.youtube.com/embed/${s.key}?&autoplay=1&controls=0&loop=1`,title:t,frameBorder:0}):e("div",{children:"No Preview Available"}),e("div",{className:"genre-wrapper",children:d.length>0&&d.map(u=>e("div",{children:u.name},u.name))}),e("p",{children:n}),e("br",{}),e("button",{className:`btn ${h?"btn-round-danger":"btn-round-primary"}`,onClick:_,children:h?"Remove from watchlist":"Add to watchlist"})]})]}),l("div",{className:"poster-overlay",children:[e("p",{onClick:A,children:t.length>20?t.toString().substring(0,20)+"...":t}),l("div",{className:"btn-grp",children:[e("button",{className:"btn btn-outline-primary",title:"Play",onClick:()=>c(`/watch/${t}/${s.key}`),children:e("i",{className:"fa fa-play","aria-hidden":"true"})}),e("button",{className:`btn ${h?"btn-outline-danger":"btn-outline-primary"}`,title:h?"Remove from list":"Add to list",onClick:_,children:h?e("i",{className:"fa fa-trash","aria-hidden":"true"}):e("i",{className:"fa fa-plus","aria-hidden":"true"})})]})]})]})};const Y=({title:r,endpoint:a})=>{const i=w(t=>t.fetchShows);let s=w(t=>t[a]);return g.exports.useEffect(()=>{const t=new AbortController,{signal:n}=t;return i({signal:n},a),()=>t.abort()},[a,i]),l("div",{className:"segment",children:[e("p",{className:"section-title",children:r}),e(T,{spaceBetween:5,breakpoints:{375:{width:375,slidesPerView:3},480:{width:480,slidesPerView:4},640:{width:640,slidesPerView:4},768:{width:768,slidesPerView:6},900:{width:900,slidesPerView:6}},children:s.length>0&&s.map(t=>e(B,{children:e(P,{id:t.id,img_url:t.poster_path||t.backdrop_path,vid_url:t.detailed.videos.results[0],title:t.original_title||t.original_name,overview:t.overview,genres:t.detailed.genres})},t.id))})]})};const z=()=>{const r=Object.keys(N);return l("div",{className:"home",children:[e(W,{}),e(C,{children:r.map((a,i)=>e(Y,{title:N[r[i]].title,endpoint:r[i]},a))})]})};const G=()=>{const{id:r,title:a}=E();return e("div",{className:"watch",children:e("iframe",{src:`https://www.youtube.com/embed/${r}`,title:a,frameBorder:0})})};function J(r,a){return[...new Map(r.map(i=>[i[a],i])).values()]}const Q=()=>{const[r,a]=g.exports.useState(""),i=g.exports.useRef(),{trending:s,popular:t,tvShows:n}=w(o=>o),d=[...s,...t,...n],p=J(d,"id").filter(o=>o.title&&o.title.toLowerCase().includes(r.toLowerCase()));return l("div",{className:"search",children:[e("input",{ref:i,onChange:()=>{a(i.current.value)},type:"text",placeholder:"Search Title..."}),e("div",{className:"search-list",children:r.length>0&&p.map(o=>e("div",{className:"poster-container",children:e(P,{id:o.id,img_url:o.poster_path||o.backdrop_path,vid_url:o.detailed.videos.results[0],title:o.original_title,overview:o.overview,genres:o.detailed.genres})},o.id))})]})};const X=()=>{const{saved:r,removeFromList:a}=R(i=>i);return l("div",{className:"my-list-wrapper",children:[e("p",{children:"My List"}),e("div",{className:"my-list",children:r.length>0&&r.map(i=>l("div",{children:[e("img",{src:`https://image.tmdb.org/t/p/w500${i.img_url}`,alt:i.title}),e("button",{className:"btn btn-round-danger",onClick:()=>a(i.id),children:"Remove"})]},i.id))})]})};const Z=()=>l("div",{className:"app",children:[e(K,{}),l(V,{children:[e(y,{path:"/",element:e(z,{})}),e(y,{path:"watch/:title/:id",element:e(G,{})}),e(y,{path:"search",element:e(Q,{})}),e(y,{path:"my-list",element:e(X,{})})]})]});j.render(e(H.StrictMode,{children:e(U,{basename:"/movie-lib",children:e(Z,{})})}),document.getElementById("root"));
